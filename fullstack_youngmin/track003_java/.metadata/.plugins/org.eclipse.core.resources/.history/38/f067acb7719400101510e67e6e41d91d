package com.company.java006;

import java.util.Scanner;

public class Exercise_Log_Array {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        final int MAX = 10; // 최대 10명의 사용자
        double[] weight = new double[MAX];
        double[] muscle = new double[MAX];
        double[] fat = new double[MAX];

        double[] goalWeight = new double[MAX];
        double[] goalMuscle = new double[MAX];
        double[] goalFat = new double[MAX];
        double tolerance = 3.0; // 목표 허용 오차

        int recordCount = 0;

        while (true) {
            System.out.println("\n== 💪 운동 기록 배열 버전 💪 ==");
            System.out.println("1. 사용자 추가");
            System.out.println("2. 운동 기록");
            System.out.println("3. 목표 현황");
            System.out.println("4. 추천 운동");
            System.out.println("9. 종료");
            System.out.print("> ");
            int sel = sc.nextInt();

            if (sel == 9) {
                System.out.println("프로그램 종료");
                break;
            }

            if (sel == 1) { // 사용자 추가
                if (recordCount >= MAX) {
                    System.out.println("최대 기록 수 초과!");
                    continue;
                }
                System.out.print("몸무게(kg): ");
                weight[recordCount] = sc.nextDouble();
                System.out.print("근육량(kg): ");
                muscle[recordCount] = sc.nextDouble();
                System.out.print("체지방율(%): ");
                fat[recordCount] = sc.nextDouble();

                // 목표 설정
                goalWeight[recordCount] = weight[recordCount] - 5;
                goalMuscle[recordCount] = muscle[recordCount] + 5;
                goalFat[recordCount] = fat[recordCount] - 5;
                if (goalFat[recordCount] < 0) goalFat[recordCount] = 0;

                System.out.println("사용자 등록 완료!");
                recordCount++;
            } 
            else if (sel == 2) { // 운동 기록
                if (recordCount == 0) {
                    System.out.println("등록된 사용자가 없습니다.");
                    continue;
                }
                System.out.print("기록할 사용자 번호 (0~" + (recordCount - 1) + "): ");
                int idx = sc.nextInt();
                if (idx < 0 || idx >= recordCount) {
                    System.out.println("잘못된 사용자 번호");
                    continue;
                }

                System.out.println("운동 선택:");
                System.out.println("1. 벤치프레스 (50회당 근육 +1kg)");
                System.out.println("2. 턱걸이 (30회당 근육 +1kg)");
                System.out.println("3. 스쿼트 (50회당 근육 +1kg, 체지방 -0.3%)");
                System.out.println("4. 런닝머신 (20분당 체중 -2kg, 체지방 -0.5%, 근육 -0.2kg)");
                int workout = sc.nextInt();

                switch (workout) {
                    case 1 -> {
                        System.out.print("벤치프레스 횟수: ");
                        int reps = sc.nextInt();
                        double gain = reps / 50.0;
                        muscle[idx] += gain;
                        System.out.println("근육량 +" + gain + "kg");
                    }
                    case 2 -> {
                        System.out.print("턱걸이 횟수: ");
                        int reps = sc.nextInt();
                        double gain = reps / 30.0;
                        muscle[idx] += gain;
                        System.out.println("근육량 +" + gain + "kg");
                    }
                    case 3 -> {
                        System.out.print("스쿼트 횟수: ");
                        int reps = sc.nextInt();
                        double gain = reps / 50.0;
                        muscle[idx] += gain;
                        fat[idx] -= 0.3 * gain;
                        if (fat[idx] < 0) fat[idx] = 0;
                        System.out.println("근육량 +" + gain + "kg, 체지방 -" + (0.3 * gain) + "%");
                    }
                    case 4 -> {
                        System.out.print("런닝머신 시간(분): ");
                        int min = sc.nextInt();
                        double fatLoss = (min / 10.0) * 0.5;
                        double muscleLoss = (min / 10.0) * 0.2;
                        double weightLoss = (min / 20.0) * 2.0;

                        fat[idx] -= fatLoss;
                        if (fat[idx] < 0) fat[idx] = 0;
                        muscle[idx] -= muscleLoss;
                        if (muscle[idx] < 0) muscle[idx] = 0;
                        weight[idx] -= weightLoss;
                        if (weight[idx] < 0) weight[idx] = 0;

                        System.out.println("체지방 -" + fatLoss + "%, 근육량 -" + muscleLoss + "kg, 몸무게 -" + weightLoss + "kg");
                    }
                    default -> System.out.println("잘못된 선택");
                }
            } 
            else if (sel == 3) { // 목표 현황
                if (recordCount == 0) {
                    System.out.println("등록된 사용자가 없습니다.");
                    continue;
                }
                for (int i = 0; i < recordCount; i++) {
                    System.out.println("[" + i + "번 사용자]");
                    System.out.println("근육량: " + muscle[i] + " / 목표: " + goalMuscle[i]);
                    System.out.println("체지방: " + fat[i] + " / 목표: " + goalFat[i]);
                    System.out.println("몸무게: " + weight[i] + " / 목표: " + goalWeight[i]);

                    if (Math.abs(muscle[i] - goalMuscle[i]) <= tolerance &&
                        Math.abs(fat[i] - goalFat[i]) <= tolerance &&
                        Math.abs(weight[i] - goalWeight[i]) <= tolerance) {
                        System.out.println("🎉 목표 달성!");
                    } else {
                        System.out.println("🔥 목표 미달성");
                    }
                }
            } 
            else if (sel == 4) { // 추천 운동
                if (recordCount == 0) {
                    System.out.println("등록된 사용자가 없습니다.");
                    continue;
                }
                for (int i = 0; i < recordCount; i++) {
                    System.out.println("[" + i + "번 사용자 추천]");
                    if (muscle[i] < goalMuscle[i] - tolerance) System.out.println("- 근육량 부족: 벤치프레스/스쿼트 💪");
                    if (fat[i] > goalFat[i] + tolerance) System.out.println("- 체지방 많음: 런닝머신 🏃‍♂️");
                    if (weight[i] > goalWeight[i] + tolerance) System.out.println("- 체중 감량 필요: 런닝머신 🏃‍♂️");
                    if (Math.abs(muscle[i] - goalMuscle[i]) <= tolerance &&
                        Math.abs(fat[i] - goalFat[i]) <= tolerance &&
                        Math.abs(weight[i] - goalWeight[i]) <= tolerance) {
                        System.out.println("👍 현재 목표 범위 안");
                    }
                }
            } 
            else {
                System.out.println("잘못된 입력");
            }
        }

        sc.close();
    }
}
